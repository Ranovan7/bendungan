{% extends 'layouts/master.html' %}

{% block content %}
    <h3>{{ waduk.nama }}</h3>
    <div class="row">
        <div class="col-md-6">
            <section class="content-header">
                <h3>VNotch
                    <a class="ml-5 btn-sm btn btn-outline-primary"
                        data-toggle="collapse" href="#form-add-vnotch"
                        role="button" aria-expanded="false"
                        aria-controls="">
                        Tambah
                    </a>
                </h3>
            </section>
            <div class="row container collapse" id="form-add-vnotch">
                <form method="POST" action="{{ path_for('keamanan.vnotch.add', {'id': waduk.id}, {'sampling': sampling}) }}">
                    <div class="form-control">
                        <span id="datepicker"><i class="fas fa-calendar mr-2 text-right"></i> {{ sampling }}</span>
                    </div>
                    <br>
                    {% for v in vnotch %}
                        <h3>{{ v.nama }}</h3>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label for="tma-{{ v.id }}">Tinggi Muka Air</label>
                                <input id="tma-{{ v.id }}" name="tma-{{ v.id }}" autofocus required class="form-control" type="number" step="0.1" value="">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="debit-{{ v.id }}">Debit Air</label>
                                <input id="debit-{{ v.id }}" name="debit-{{ v.id }}" autofocus required class="form-control" type="number" step="0.1" value="">
                            </div>
                        </div>
                        <hr>
                    {% endfor %}
                  <div class="form-group">
                    <input type="submit" class="btn btn-primary">
                  </div>
                </form>
            </div>
            {% for t, v_per in v_periodik %}
                <div>
                    <h5>{{ t }}</h5>
                    <div class="container">
                        {% for v in v_per %}
                            <div>
                                <p><b>{{ v.nama }}</b> : {{ v.tma }} (TMA), {{ v.debit }} (Debit)</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="col-md-6">
            <section class="content-header">
                <h3>Piezometer
                    <a class="ml-5 btn-sm btn btn-outline-primary"
                        data-toggle="collapse" href="#form-add-piezometer"
                        role="button" aria-expanded="false"
                        aria-controls="">
                        Tambah
                    </a>
                </h3>
            </section>
            <div class="row container collapse" id="form-add-piezometer">
                <form method="POST" action="{{ path_for('keamanan.piezometer.add', {'id': waduk.id}, {'sampling': sampling}) }}">
                    <div class="form-control">
                        <span id="datepicker2"><i class="fas fa-calendar mr-2 text-right"></i> {{ sampling }}</span>
                    </div>
                    <br>
                    {% for p in piezometer %}
                        <h3>{{ p.nama }}</h3>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label for="tma-{{ p.id }}">Tinggi Muka Air</label>
                                <input id="tma-{{ p.id }}" name="tma-{{ p.id }}" autofocus required class="form-control" type="number" step="0.1" value="">
                            </div>
                        </div>
                        <hr>
                    {% endfor %}
                  <div class="form-group">
                    <input type="submit" class="btn btn-primary">
                  </div>
                </form>
            </div>
            {% for t, p_per in p_periodik %}
                <div>
                    <h5>{{ t }}</h5>
                    <div class="container">
                        {% for p in p_per %}
                            <div>
                                <p><b>{{ p.nama }}</b> : {{ p.tma }} (TMA)</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
    <script>
        $('#datepicker').datepicker({
            todayHighlight: true,
            autoclose: true,
            format: 'yyyy-mm-dd'
        });
        $('#datepicker').on('changeDate', function () {
            window.location = "{{ path_for('keamanan.bendungan', {'id': waduk.id}) }}?sampling=" + $('#datepicker').datepicker('getFormattedDate')
        });

        $('#datepicker2').datepicker({
            todayHighlight: true,
            autoclose: true,
            format: 'yyyy-mm-dd'
        });
        $('#datepicker2').on('changeDate', function () {
            window.location = "{{ path_for('keamanan.bendungan', {'id': waduk.id}) }}?sampling=" + $('#datepicker2').datepicker('getFormattedDate')
        });
    </script>
{% endblock %}
