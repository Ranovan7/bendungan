{% extends 'layouts/master.html' %}

{% set title = "Asset" %}

{% block css %}

{% endblock %}

{% block content %}
    <!-- Computer View -->
    <section class="content-header d-none d-sm-block">
        <h1>{{ waduk.nama }} Asset</h1>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <!-- <li class="breadcrumb-item"><a href="/asset">Asset</a></li> -->
            <li class="breadcrumb-item">{{ waduk.nama }}</li>
        </ol>
    </section>

    <!-- Mobile View -->
    <section class="content-header d-block d-sm-none">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <!-- <li class="breadcrumb-item"><a href="/asset">Asset</a></li> -->
            <li class="breadcrumb-item">{{ waduk.nama }}</li>
        </ol>
        <h3>{{ waduk.nama }} Asset</h3>
    </section>
    <hr>
    <section class="content-header">
        <h4>
            <b>Asset Bendungan</b>
            <a class="btn btn-sm btn-outline-info ml-1" href="{{ path_for('asset.rusak', {'id': waduk.id}) }}">
                Daftar Kerusakan
            </a>
            <a class="btn btn-sm btn-outline-primary ml-1"
                data-toggle="collapse" href="#form-add-asset"
                role="button" aria-expanded="false"
                aria-controls="">
                Tambah Asset
            </a>
    </section>
    <div class="row container collapse" id="form-add-asset">
        <div class="col-md-8">
            <h3>Tambah Asset</h3>
            <form method="POST" action="{{ path_for('asset.add', {'id': waduk.id}, {'sampling': sampling}) }}">
                <div class="row">
                    <div class="form-group col-md-6">
                        <label class="form-text" for="nama">Nama Asset</label>
                        <input class="form-control" type="text" name="nama" id="nama" required value="">
                    </div>
                    <div class="form-group col-md-6">
                        <label class="form-text" for="perolehan">Tanggal</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="sampling-prepend"><i class="fas fa-calendar mr-2 text-right"></i></span>
                            </div>
                            <input class="form-control" type="text" name="perolehan" id="perolehan" required value="{{ sampling | date('Y-m-d') }}">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-text" for="kategori">Kategori</label>
                    <select name="kategori" id="kategori" class="form-control" required>
                        {% for k in kategori %}
                            <option value="{{ k }}">{{ k }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="row">
                    <div class="form-group col-md-6">
                        <label class="form-text" for="merk">Merk Asset</label>
                        <input class="form-control" type="text" name="merk" id="merk" required value="">
                    </div>
                    <div class="form-group col-md-6">
                        <label class="form-text" for="model">Model Asset</label>
                        <input class="form-control" type="text" name="model" id="model" required value="">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-6">
                        <label class="form-text" for="nilai">Nilai Perolehan</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend">Rp</span>
                            </div>
                            <input class="form-control" type="number" step="0.1" name="nilai" id="nilai" required value="">
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label class="form-text" for="bmn">No. BMN</label>
                        <input class="form-control" type="text" name="bmn" id="bmn" required value="">
                    </div>
                </div>
              <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Tambah">
              </div>
            </form>
        </div>
    </div>
    <hr>
    {% for as in asset %}
        <div class="row">
            <div class="col-md-3">
                <h5>{{ loop.index }}. {{ as.nama }}</h5>
            </div>
            <div class="col-md-3 ml-3">
                <p>BMN :{{ as.bmn }}</p>
                <p>Merk :{{ as.merk }}</p>
                <p>Model :{{ as.model }}</p>
            </div>
            <div class="col-md-3 ml-3">
                <p>
                    Status :
                    {% if as.rusak_kat %}
                        <span style="color: red;">Rusak</span>
                    {% else %}
                        <span style="color: green;">Baik</span>
                    {% endif %}
                </p>
            </div>
            <div class="col-md-2 ml-3">
                <a href="{{ path_for('asset.rusak.add', {'id': waduk.id, 'asset_id': as.id}) }}" class="btn btn-sm btn-outline-primary {% if as.rusak_kat %}disabled{% endif %}">Lapor Rusak</a>
                <a href="#"><i class="fas fa-trash ml-3"></i></a>
            </div>
        </div>
        <hr>
    {% endfor %}
{% endblock %}

{% block js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script>
    $('#perolehan').datepicker({
        todayHighlight: true,
        autoclose: true,
        format:  'yyyy-mm-dd'
    });
</script>
{% endblock %}
